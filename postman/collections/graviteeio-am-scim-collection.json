{
	"info": {
		"_postman_id": "93b8a7d7-d3b6-4868-bf6f-3485bd26b49e",
		"name": "Gravitee.io - AM - SCIM",
		"description": "Test System for Cross-domain Identity Management\nSCIM 2.0 is released as RFC7642, RFC7643 and RFC7644",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Prepare",
			"item": [
				{
					"name": "Generate admin token",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8f58b376-fb48-40fa-be00-c2eba9e4a2f4",
								"exec": [
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var token = JSON.parse(responseBody);",
									"pm.environment.set('token', token.access_token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW5hZG1pbg=="
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "grant_type",
									"value": "password",
									"type": "text"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "text"
								},
								{
									"key": "password",
									"value": "adminadmin",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{management_url}}/management/auth/token",
							"host": [
								"{{management_url}}"
							],
							"path": [
								"management",
								"auth",
								"token"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create scim domain",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4c5b6f31-228b-4eeb-927a-7e6ff5006629",
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"pm.environment.set('domain', jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"scim-domain\", \n\t\"description\": \"test System for Cross-domain Identity Management specifications\"\n}"
						},
						"url": {
							"raw": "{{management_url}}/management/organizations/{{defaultOrganizationId}}/environments/{{defaultEnvironmentId}}/domains/",
							"host": [
								"{{management_url}}"
							],
							"path": [
								"management",
								"organizations",
								"{{defaultOrganizationId}}",
								"environments",
								"{{defaultEnvironmentId}}",
								"domains",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Start domain",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f97bdacb-1b10-4d35-a2a2-526f498e55bb",
								"exec": [
									"// wait for sync process",
									"setTimeout(function(){}, 10000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"enabled\": true\n}"
						},
						"url": {
							"raw": "{{management_url}}/management/organizations/{{defaultOrganizationId}}/environments/{{defaultEnvironmentId}}/domains/{{domain}}",
							"host": [
								"{{management_url}}"
							],
							"path": [
								"management",
								"organizations",
								"{{defaultOrganizationId}}",
								"environments",
								"{{defaultEnvironmentId}}",
								"domains",
								"{{domain}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "well-known/openid-configuration",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "57580633-d7d9-46e1-9f47-185530f4883f",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Check discovery endpoints\", function () {",
									"    pm.response.to.be.header('Content-Type', 'application/json');",
									"    var body = pm.response.json();",
									"    ",
									"    pm.expect(body).to.have.property(\"token_endpoint\");",
									"    pm.environment.set('tokenEndpoint', body.token_endpoint);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{gateway_url}}/{{domain}}/oidc/.well-known/openid-configuration",
							"host": [
								"{{gateway_url}}"
							],
							"path": [
								"{{domain}}",
								"oidc",
								".well-known",
								"openid-configuration"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "SCIM",
			"item": [
				{
					"name": "Case - non SCIM domain",
					"item": [
						{
							"name": "Fetch Service Provider Configuration",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f670da30-63c5-444e-bdf1-9dffc11d6ad7",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/ServiceProviderConfig",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"ServiceProviderConfig"
									]
								}
							},
							"response": []
						},
						{
							"name": "Fetch Users endpoint",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "97fce838-9013-4891-acbd-49ce98684da5",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Users",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Fetch Groups endpoint",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "2b0aec01-082f-43bc-9a1c-ca6c54674f59",
										"exec": [
											"pm.test(\"Status code is 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Groups"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Configure domain",
					"item": [
						{
							"name": "Configure SCIM",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9c50e96d-de13-475c-aa4a-cb5810e1d022",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"SCIM enabled for domain\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.scim.enabled).to.eql(true);",
											"});",
											"",
											"// wait for sync process",
											"setTimeout(function(){}, 10000);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Authorization",
										"type": "text",
										"value": "Bearer {{token}}"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"scim\": {\n    \"enabled\": true\n  }\n}"
								},
								"url": {
									"raw": "{{management_url}}/management/organizations/{{defaultOrganizationId}}/environments/{{defaultEnvironmentId}}/domains/{{domain}}",
									"host": [
										"{{management_url}}"
									],
									"path": [
										"management",
										"organizations",
										"{{defaultOrganizationId}}",
										"environments",
										"{{defaultEnvironmentId}}",
										"domains",
										"{{domain}}"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Service Provider Configuration",
					"item": [
						{
							"name": "Fetch Service Provider Configuration",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c31e3f99-e58c-4938-a499-4b97e13e97b4",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Check SCIM configuration\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:schemas:core:2.0:ServiceProviderConfig']);",
											"    pm.expect(jsonData.patch.supported).to.eql(false);",
											"    pm.expect(jsonData.bulk.supported).to.eql(false);",
											"    pm.expect(jsonData.filter.supported).to.eql(true);",
											"    pm.expect(jsonData.changePassword.supported).to.eql(false);",
											"    pm.expect(jsonData.sort.supported).to.eql(false);",
											"    pm.expect(jsonData.etag.supported).to.eql(false);",
											"    pm.expect(jsonData.authenticationSchemes[0].type).to.eql('oauthbearertoken');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/ServiceProviderConfig",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"ServiceProviderConfig"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Case - invalid token",
					"item": [
						{
							"name": "Fetch Users endpoint - no token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "64679166-ca71-4cda-ac00-62c1b9608496",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"Authorization failure. The authorization header is invalid or missing.\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Users",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Fetch Users endpoint - invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "7d7e285a-6afa-4bd5-911e-e2ada096fbcd",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"The access token is invalid\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer wrong-token",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Users",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Users endpoint - no token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "12099416-1259-48ae-844a-cfa599ce9ae8",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"Authorization failure. The authorization header is invalid or missing.\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Users",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Users endpoint - invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c9eaa9c0-1305-4d77-aa54-52bc72f261ba",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"The access token is invalid\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer wrong-token",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Users",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Users"
									]
								}
							},
							"response": []
						},
						{
							"name": "Replace Users endpoint - no token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "974fcb4e-d49e-4739-b1d2-5189fbd19699",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"Authorization failure. The authorization header is invalid or missing.\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Users/test-id",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Users",
										"test-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "Replace Users endpoint - invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "585a71de-2ad5-4da5-98f5-a5eb02ce8c3a",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"The access token is invalid\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer wrong-token",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Users/test-id",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Users",
										"test-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Users endpoint - no token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0b37b536-7a5b-4779-be4f-b3b173f4d5f1",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"Authorization failure. The authorization header is invalid or missing.\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Users/test-id",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Users",
										"test-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Users endpoint - invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "e647d977-407b-46e7-8dae-0b8afdaa2034",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"The access token is invalid\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer wrong-token",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Users/test-id",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Users",
										"test-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "Fetch Groups endpoint - no token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f22c38a7-7655-4f59-91a9-7ca1d952aef2",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"Authorization failure. The authorization header is invalid or missing.\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Groups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Fetch Groups endpoint - invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b99c8f47-b121-435b-b737-c120e6ce430f",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"The access token is invalid\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer wrong-token",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Groups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Replace Groups endpoint - no token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "8575e744-e31b-4cac-98d3-ea3556a94512",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"Authorization failure. The authorization header is invalid or missing.\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Groups/test-id",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Groups",
										"test-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "Replace Groups endpoint - invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "8630bc58-17c2-4bb4-bf66-c341d3cc567b",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"The access token is invalid\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer wrong-token",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Groups/test-id",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Groups",
										"test-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Groups endpoint - no token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "02b40ffd-ca97-4a68-994d-c1744bc2784a",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"Authorization failure. The authorization header is invalid or missing.\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Groups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Groups endpoint - invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "2661bdf8-86ae-430f-abc0-b5371b519409",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"The access token is invalid\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer wrong-token",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Groups"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Groups endpoint - no token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9c9a2243-e68a-410d-a4ba-a3ca23e14880",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"Authorization failure. The authorization header is invalid or missing.\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Groups/test-id",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Groups",
										"test-id"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Groups endpoint - invalid token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "4760f2f0-5b2d-411c-b5df-1234336278a6",
										"exec": [
											"pm.test(\"Status code is 401\", function () {",
											"    pm.response.to.have.status(401);",
											"});",
											"",
											"pm.test(\"SCIM is secured with a bearer token\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.status).to.eql(\"401\");",
											"    pm.expect(jsonData.detail).to.eql(\"The access token is invalid\");",
											"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer wrong-token",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "{{gateway_url}}/{{domain}}/scim/Groups/test-id",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"{{domain}}",
										"scim",
										"Groups",
										"test-id"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Configure client",
					"item": [
						{
							"name": "Create SCIM client",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "99537ebe-5110-46c3-a1df-d9b252f4829e",
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"var body = JSON.parse(responseBody);",
											"pm.environment.set('clientSCIM', body.id);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"clientId\": \"client-scim\",\n  \"clientSecret\": \"client-scim-secret\"\n}"
								},
								"url": {
									"raw": "{{management_url}}/management/organizations/{{defaultOrganizationId}}/environments/{{defaultEnvironmentId}}/domains/{{domain}}/clients",
									"host": [
										"{{management_url}}"
									],
									"path": [
										"management",
										"organizations",
										"{{defaultOrganizationId}}",
										"environments",
										"{{defaultEnvironmentId}}",
										"domains",
										"{{domain}}",
										"clients"
									]
								}
							},
							"response": []
						},
						{
							"name": "Configure SCIM client",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "6c83794f-61e9-4a2e-bf43-17c693514942",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"// wait for sync process",
											"setTimeout(function(){}, 6000);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"authorizedGrantTypes\": [\"client_credentials\"],\n  \"scopes\" : [\"scim\"]\n}"
								},
								"url": {
									"raw": "{{management_url}}/management/organizations/{{defaultOrganizationId}}/environments/{{defaultEnvironmentId}}/domains/{{domain}}/clients/{{clientSCIM}}",
									"host": [
										"{{management_url}}"
									],
									"path": [
										"management",
										"organizations",
										"{{defaultOrganizationId}}",
										"environments",
										"{{defaultEnvironmentId}}",
										"domains",
										"{{domain}}",
										"clients",
										"{{clientSCIM}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Generate token",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9879ae22-edf6-41e4-b489-f9d773141c21",
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Has an access_token\", function () {",
											"    var body = pm.response.json();",
											"    pm.expect(body).to.have.property('access_token');",
											"    ",
											"    pm.environment.set('access_token', body.access_token);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "295b523a-d3f5-461b-be5e-48a622b292b6",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Basic Y2xpZW50LXNjaW06Y2xpZW50LXNjaW0tc2VjcmV0"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "grant_type",
											"value": "client_credentials",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{tokenEndpoint}}",
									"host": [
										"{{tokenEndpoint}}"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Users",
					"item": [
						{
							"name": "Create",
							"item": [
								{
									"name": "Invalid request - malformed json",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "22d6522c-1faf-4352-94a9-75d19f0bc5f2",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM create user malformed json\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidSyntax\");",
													"    pm.expect(jsonData.detail).to.eql(\"Unable to parse body message\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - userName required",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "91654741-98a8-4a68-9405-d4fcc92b0fd0",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM create userName field required\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidValue\");",
													"    pm.expect(jsonData.detail).to.eql(\"Field [userName] is required\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n     \"schemas\":[\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n     \"externalId\":\"bjensen\",\n     \"name\":{\n       \"formatted\":\"Ms. Barbara J Jensen III\",\n       \"familyName\":\"Jensen\",\n       \"givenName\":\"Barbara\"\n     }\n   }"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - userName invalid",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9c5a16f7-98d2-4e1d-a2a3-b50a78f05918",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM create userName field invalid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidValue\");",
													"    pm.expect(jsonData.detail).to.eql(\"Username [&Invalid] is not a valid value\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n     \"schemas\":[\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n     \"externalId\":\"bjensen\",\n     \"userName\": \"&Invalid\",\n     \"name\":{\n       \"formatted\":\"Ms. Barbara J Jensen III\",\n       \"familyName\":\"Jensen\",\n       \"givenName\":\"Barbara\"\n     }\n   }"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - familyName invalid",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7d32d73a-f41b-43c8-adf2-a7feb151f7ba",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM create familyName field invalid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidValue\");",
													"    pm.expect(jsonData.detail).to.eql(\"Last name [#Invalid] is not a valid value\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n     \"schemas\":[\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n     \"externalId\":\"bjensen\",\n     \"userName\": \"bjensen@example.com\",\n     \"name\":{\n       \"formatted\":\"Ms. Barbara J Jensen III\",\n       \"familyName\":\"#Invalid\",\n       \"givenName\":\"Barbara\"\n     }\n   }"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - givenName invalid",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9e2579da-0cfb-4aef-9d60-4c800643197f",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM create givenName field invalid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidValue\");",
													"    pm.expect(jsonData.detail).to.eql(\"First name [#Invalid] is not a valid value\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n     \"schemas\":[\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n     \"externalId\":\"bjensen\",\n     \"userName\": \"bjensen@example.com\",\n     \"name\":{\n       \"formatted\":\"Ms. Barbara J Jensen III\",\n       \"familyName\": \"Jensen\",\n       \"givenName\":\"#Invalid\"\n     }\n   }"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - email invalid",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "36c49e9a-1d6e-4324-81a9-546e36307d43",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM create givenName field invalid\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidValue\");",
													"    pm.expect(jsonData.detail).to.eql(\"Value [#Invalid] is not a valid email.\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n     \"schemas\":[\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n     \"externalId\":\"bjensen\",\n     \"userName\": \"bjensen@example.com\",\n     \"name\":{\n       \"formatted\":\"Ms. Barbara J Jensen III\",\n       \"familyName\": \"Jensen\",\n       \"givenName\": \"Barbara\"\n     },\n     \"emails\": [\n\t    {\n\t      \"value\": \"#Invalid\",\n\t      \"type\": \"work\",\n\t      \"primary\": true\n\t    }\n\t  ]\n   }"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create user",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "5e4fc3aa-1d92-4d5b-8a35-2a7f9d046287",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"pm.test(\"SCIM create user\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData).to.have.property('id');",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:schemas:core:2.0:User']);",
													"    pm.environment.set('userSCIM', jsonData.id);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token}}",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n  \"externalId\": \"701984\",\n  \"userName\": \"bjensen@example.com\",\n  \"name\": {\n    \"formatted\": \"Ms. Barbara J Jensen, III\",\n    \"familyName\": \"Jensen\",\n    \"givenName\": \"Barbara\",\n    \"middleName\": \"Jane\",\n    \"honorificPrefix\": \"Ms.\",\n    \"honorificSuffix\": \"III\"\n  },\n  \"displayName\": \"Babs Jensen\",\n  \"nickName\": \"Babs\",\n  \"profileUrl\": \"https://login.example.com/bjensen\",\n  \"emails\": [\n    {\n      \"value\": \"bjensen@example.com\",\n      \"type\": \"work\",\n      \"primary\": true\n    },\n    {\n      \"value\": \"babs@jensen.org\",\n      \"type\": \"home\"\n    }\n  ],\n  \"addresses\": [\n    {\n      \"type\": \"work\",\n      \"streetAddress\": \"100 Universal City Plaza\",\n      \"locality\": \"Hollywood\",\n      \"region\": \"CA\",\n      \"postalCode\": \"91608\",\n      \"country\": \"USA\",\n      \"formatted\": \"100 Universal City Plaza\\nHollywood, CA 91608 USA\",\n      \"primary\": true\n    },\n    {\n      \"type\": \"home\",\n      \"streetAddress\": \"456 Hollywood Blvd\",\n      \"locality\": \"Hollywood\",\n      \"region\": \"CA\",\n      \"postalCode\": \"91608\",\n      \"country\": \"USA\",\n      \"formatted\": \"456 Hollywood Blvd\\nHollywood, CA 91608 USA\"\n    }\n  ],\n  \"phoneNumbers\": [\n    {\n      \"value\": \"555-555-5555\",\n      \"type\": \"work\"\n    },\n    {\n      \"value\": \"555-555-4444\",\n      \"type\": \"mobile\"\n    }\n  ],\n  \"ims\": [\n    {\n      \"value\": \"someaimhandle\",\n      \"type\": \"aim\"\n    }\n  ],\n  \"photos\": [\n    {\n      \"value\":\n        \"https://photos.example.com/profilephoto/72930000000Ccne/F\",\n      \"type\": \"photo\"\n    },\n    {\n      \"value\":\n        \"https://photos.example.com/profilephoto/72930000000Ccne/T\",\n      \"type\": \"thumbnail\"\n    }\n  ],\n  \"userType\": \"Employee\",\n  \"title\": \"Tour Guide\",\n  \"preferredLanguage\": \"en-US\",\n  \"locale\": \"en-US\",\n  \"timezone\": \"America/Los_Angeles\",\n  \"active\":true,\n  \"x509Certificates\": [\n    {\n      \"value\":\n       \"MIIDQzCCAqygAwIBAgICEAAwDQ....1UEBhMCVVMx\"\n    }\n  ]\n}"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - userName already exists",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8ebe4377-e69f-4448-aacd-cdddd7be7ced",
												"exec": [
													"pm.test(\"Status code is 409\", function () {",
													"    pm.response.to.have.status(409);",
													"});",
													"",
													"pm.test(\"SCIM create user uniqueness\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"409\");",
													"    pm.expect(jsonData.scimType).to.eql(\"uniqueness\");",
													"    pm.expect(jsonData.detail).to.eql(\"User with username [bjensen@example.com] already exists\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n     \"schemas\":[\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n     \"userName\":\"bjensen@example.com\",\n     \"externalId\":\"bjensen\",\n     \"name\":{\n       \"formatted\":\"Ms. Barbara J Jensen III\",\n       \"familyName\":\"Jensen\",\n       \"givenName\":\"Barbara\"\n     }\n   }"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Update",
							"item": [
								{
									"name": "Invalid request - user not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b293c75e-aea0-4bce-a1e3-0af2e2ea26ae",
												"exec": [
													"pm.test(\"Status code is 404\", function () {",
													"    pm.response.to.have.status(404);",
													"});",
													"",
													"pm.test(\"SCIM update user unknown user\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"404\");",
													"    pm.expect(jsonData.detail).to.eql(\"User [wrong-id] can not be found.\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n     \"schemas\":[\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n     \"userName\":\"bjensen\",\n     \"externalId\":\"bjensen\",\n     \"name\":{\n       \"formatted\":\"Ms. Barbara J Jensen III\",\n       \"familyName\":\"Jensen\",\n       \"givenName\":\"Barbara\"\n     }\n   }"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users/wrong-id",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users",
												"wrong-id"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - malformed json",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "856deb98-3101-45e8-8533-0427465fdb34",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM update user malformed json\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidSyntax\");",
													"    pm.expect(jsonData.detail).to.eql(\"Unable to parse body message\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users/{{userSCIM}}",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users",
												"{{userSCIM}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Update user",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "752b862b-b24c-4020-b89d-3360a108e75d",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM update user\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData).to.have.property('id');",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:schemas:core:2.0:User']);",
													"    pm.expect(jsonData.name.familyName).to.eql('Jensen2');",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n     \"schemas\":[\"urn:ietf:params:scim:schemas:core:2.0:User\"],\n     \"userName\":\"bjensen\",\n     \"externalId\":\"bjensen\",\n     \"name\":{\n       \"formatted\":\"Ms. Barbara J Jensen III\",\n       \"familyName\":\"Jensen2\",\n       \"givenName\":\"Barbara\"\n     }\n   }"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users/{{userSCIM}}",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users",
												"{{userSCIM}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "List",
							"item": [
								{
									"name": "List users",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "6d679b18-3945-4732-915e-340b8ea87d45",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"// 2 users (one from SCIM and an other from inline idp)",
													"pm.test(\"SCIM list users\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:ListResponse']);",
													"    pm.expect(jsonData.totalResults).to.eql(1);",
													"    pm.expect(jsonData.startIndex).to.eql(1);",
													"    pm.expect(jsonData.itemsPerPage).to.eql(1);",
													"    pm.expect(jsonData.Resources.length).to.eql(1);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								},
								{
									"name": "Filter users - invalid filter",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "ee863ad5-b818-478e-ae58-e75508d5bca3",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM list users - invalid filter\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"    pm.expect(jsonData.scimType).to.eql('invalidSyntax');",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users?filter=invalid",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											],
											"query": [
												{
													"key": "filter",
													"value": "invalid"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Filter users - user not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "f673a5b9-138d-4416-8645-8b28c637b83f",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM list users - unknown user\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:ListResponse']);",
													"    pm.expect(jsonData.totalResults).to.eql(0);",
													"    pm.expect(jsonData.startIndex).to.eql(1);",
													"    pm.expect(jsonData.itemsPerPage).to.eql(0);",
													"    pm.expect(jsonData.Resources.length).to.eql(0);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users?filter=userName eq \"invalid\"",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											],
											"query": [
												{
													"key": "filter",
													"value": "userName eq \"invalid\""
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Filter users - user found - simple filter - eq operand",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "525a17e7-afe9-4d8f-9a4a-fd35ca0193a6",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM list users - simple filter - eq\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:ListResponse']);",
													"    pm.expect(jsonData.totalResults).to.eql(1);",
													"    pm.expect(jsonData.startIndex).to.eql(1);",
													"    pm.expect(jsonData.itemsPerPage).to.eql(1);",
													"    pm.expect(jsonData.Resources.length).to.eql(1);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users?filter=userName eq \"bjensen@example.com\"",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											],
											"query": [
												{
													"key": "filter",
													"value": "userName eq \"bjensen@example.com\""
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Filter users - user found - simple filter - regex operand",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1116aec3-a33a-4f08-a0d6-f74f9878c233",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM list users - simple filter - regex\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:ListResponse']);",
													"    pm.expect(jsonData.totalResults).to.eql(1);",
													"    pm.expect(jsonData.startIndex).to.eql(1);",
													"    pm.expect(jsonData.itemsPerPage).to.eql(1);",
													"    pm.expect(jsonData.Resources.length).to.eql(1);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users?filter=userName co \"bjensen\"",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											],
											"query": [
												{
													"key": "filter",
													"value": "userName co \"bjensen\""
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Filter users - user found - complex filter - or operand",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "581d832a-ae67-4279-9eaf-4aba2e7ba42a",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM list users - complex filter - or\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:ListResponse']);",
													"    pm.expect(jsonData.totalResults).to.eql(1);",
													"    pm.expect(jsonData.startIndex).to.eql(1);",
													"    pm.expect(jsonData.itemsPerPage).to.eql(1);",
													"    pm.expect(jsonData.Resources.length).to.eql(1);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users?filter=userName eq \"invalid\" or name.givenName eq \"Barbara\"",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											],
											"query": [
												{
													"key": "filter",
													"value": "userName eq \"invalid\" or name.givenName eq \"Barbara\""
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Filter users - user found - complex filter - and operand",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4ddc7d4a-4526-48ad-b1c4-c2bfecef526b",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM list users - complex filter - and\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:ListResponse']);",
													"    pm.expect(jsonData.totalResults).to.eql(1);",
													"    pm.expect(jsonData.startIndex).to.eql(1);",
													"    pm.expect(jsonData.itemsPerPage).to.eql(1);",
													"    pm.expect(jsonData.Resources.length).to.eql(1);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users?filter=name.givenName eq \"Barbara\" and active eq false and meta.created ge \"2020-10-14T20:18:43.048Z\"",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											],
											"query": [
												{
													"key": "filter",
													"value": "name.givenName eq \"Barbara\" and active eq false and meta.created ge \"2020-10-14T20:18:43.048Z\""
												}
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Delete",
							"item": [
								{
									"name": "Invalid request - user not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "2fdcae98-8588-4e9d-90cb-65322a0115dc",
												"exec": [
													"pm.test(\"Status code is 404\", function () {",
													"    pm.response.to.have.status(404);",
													"});",
													"",
													"pm.test(\"SCIM delete user unknown user\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"404\");",
													"    pm.expect(jsonData.detail).to.eql(\"User [wrong-id] can not be found.\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users/wrong-id",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users",
												"wrong-id"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete user",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "554966aa-b64f-488b-973e-b8e90a21e5ab",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users/{{userSCIM}}",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users",
												"{{userSCIM}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "List users",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "eeea7a6c-0a93-40f3-a503-6d493d9ea41b",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM list users after delete\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:ListResponse']);",
													"    pm.expect(jsonData.totalResults).to.eql(0);",
													"    pm.expect(jsonData.startIndex).to.eql(1);",
													"    pm.expect(jsonData.itemsPerPage).to.eql(0);",
													"    pm.expect(jsonData.Resources.length).to.eql(0);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Users",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Users"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Groups",
					"item": [
						{
							"name": "Create",
							"item": [
								{
									"name": "Invalid request - malformed json",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "154a610f-88c6-4d6f-8dd1-7ef5a43a3d19",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM create group malformed json\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidSyntax\");",
													"    pm.expect(jsonData.detail).to.eql(\"Unable to parse body message\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - displayName required",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a5b38152-7c85-4b3d-a473-261297e58a52",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM group displayName field required\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidValue\");",
													"    pm.expect(jsonData.detail).to.eql(\"Field [displayName] is required\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n   \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:Group\"]\n}"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Create group",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "df09b87c-c019-485f-a2c7-c504a913bf95",
												"exec": [
													"pm.test(\"Status code is 201\", function () {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"pm.test(\"SCIM create user\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData).to.have.property('id');",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:schemas:core:2.0:Group']);",
													"    pm.environment.set('groupSCIM', jsonData.id);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n   \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:Group\"],\n   \"displayName\": \"Tour Guides\"\n}"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - displayName already exists",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0e8a8d8b-a5df-4522-ac3d-5d7be45a6ac8",
												"exec": [
													"pm.test(\"Status code is 409\", function () {",
													"    pm.response.to.have.status(409);",
													"});",
													"",
													"pm.test(\"SCIM create group uniqueness\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"409\");",
													"    pm.expect(jsonData.scimType).to.eql(\"uniqueness\");",
													"    pm.expect(jsonData.detail).to.eql(\"Group with display name [Tour Guides] already exists\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n   \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:Group\"],\n   \"displayName\": \"Tour Guides\"\n}"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Update",
							"item": [
								{
									"name": "Invalid request - group not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b9200be7-4108-4ae5-b4c7-5102b85b881c",
												"exec": [
													"pm.test(\"Status code is 404\", function () {",
													"    pm.response.to.have.status(404);",
													"});",
													"",
													"pm.test(\"SCIM update user unknown user\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"404\");",
													"    pm.expect(jsonData.detail).to.eql(\"Group [wrong-id] can not be found.\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n   \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:Group\"],\n   \"displayName\": \"Tour Guides 2\"\n}"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups/wrong-id",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups",
												"wrong-id"
											]
										}
									},
									"response": []
								},
								{
									"name": "Invalid request - malformed json",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "12203bb6-20f6-4c0f-994b-872e7a1c202e",
												"exec": [
													"pm.test(\"Status code is 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});",
													"",
													"pm.test(\"SCIM update user malformed json\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"400\");",
													"    pm.expect(jsonData.scimType).to.eql(\"invalidSyntax\");",
													"    pm.expect(jsonData.detail).to.eql(\"Unable to parse body message\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Authorization",
												"value": "Bearer {{access_token}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups/{{groupSCIM}}",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups",
												"{{groupSCIM}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Update group",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c4b9c502-6131-489a-97c1-726df18e046a",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM update user\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData).to.have.property('id');",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:schemas:core:2.0:Group']);",
													"    pm.expect(jsonData.displayName).to.eql('Tour Guides 2');",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											},
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"type": "text",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n   \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:Group\"],\n   \"displayName\": \"Tour Guides 2\"\n}"
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups/{{groupSCIM}}",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups",
												"{{groupSCIM}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "List",
							"item": [
								{
									"name": "List groups",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "294bede6-b9f4-4bc5-8ef9-9c87828763b3",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM list groups\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:ListResponse']);",
													"    pm.expect(jsonData.totalResults).to.eql(1);",
													"    pm.expect(jsonData.startIndex).to.eql(1);",
													"    pm.expect(jsonData.itemsPerPage).to.eql(1);",
													"    pm.expect(jsonData.Resources.length).to.eql(1);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Delete",
							"item": [
								{
									"name": "Invalid request - group not found",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e5d31a3d-1716-4caf-a757-d2fad1dd3989",
												"exec": [
													"pm.test(\"Status code is 404\", function () {",
													"    pm.response.to.have.status(404);",
													"});",
													"",
													"pm.test(\"SCIM delete group unknown group\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.status).to.eql(\"404\");",
													"    pm.expect(jsonData.detail).to.eql(\"Group [wrong-id] can not be found.\");",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:Error']);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups/wrong-id",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups",
												"wrong-id"
											]
										}
									},
									"response": []
								},
								{
									"name": "Delete group",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "31393e7d-0f87-48ab-a89e-2a99497539bd",
												"exec": [
													"pm.test(\"Status code is 204\", function () {",
													"    pm.response.to.have.status(204);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups/{{groupSCIM}}",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups",
												"{{groupSCIM}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "List groups",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b0c39cc2-82e4-4007-8a04-8635e3ae9036",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"pm.test(\"SCIM list groups after delete\", function () {",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.schemas).to.eql(['urn:ietf:params:scim:api:messages:2.0:ListResponse']);",
													"    pm.expect(jsonData.totalResults).to.eql(0);",
													"    pm.expect(jsonData.startIndex).to.eql(1);",
													"    pm.expect(jsonData.itemsPerPage).to.eql(0);",
													"    pm.expect(jsonData.Resources.length).to.eql(0);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Authorization",
												"type": "text",
												"value": "Bearer {{access_token}}"
											}
										],
										"url": {
											"raw": "{{gateway_url}}/{{domain}}/scim/Groups",
											"host": [
												"{{gateway_url}}"
											],
											"path": [
												"{{domain}}",
												"scim",
												"Groups"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Delete domain",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "dfe99dc6-cf9c-466d-96ff-7e3fd8972d2d",
						"exec": [
							"pm.test(\"Status code is 204\", function () {",
							"    pm.response.to.have.status(204);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{management_url}}/management/organizations/{{defaultOrganizationId}}/environments/{{defaultEnvironmentId}}/domains/{{domain}}",
					"host": [
						"{{management_url}}"
					],
					"path": [
						"management",
						"organizations",
						"{{defaultOrganizationId}}",
						"environments",
						"{{defaultEnvironmentId}}",
						"domains",
						"{{domain}}"
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}